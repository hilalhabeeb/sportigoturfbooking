
{% load static %}
<!DOCTYPE html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport"
          content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <title>Soccer Club</title>
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/vendor.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/layerslider.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



    <script src="{% static 'js/vendor/modernizr.js' %}"></script>
    <style>
        /* Apply background image to the entire page */
    
 @import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');

    h2,h3,p {
        font-family: 'Times New Roman', serif;
    }

    
    
    .turf-booking {
        padding: 40px 0;
        background-color: #f5f5f5;
    }

    .turf-booking h2 {
        font-size: 24px;
        margin-bottom: 20px;
        font-family: 'Times New Roman', serif;
    }

    .turf-booking .turf-list {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
    }

    .turf-booking .turf-item {
        width: calc(33.33% - 20px);
        margin-bottom: 20px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 20px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    .turf-booking .turf-item img {
        max-width: auto;
        height: 200px;
    }

    .turf-booking .booking-form {
        font-family: 'Times New Roman', serif;
        margin-top: 20px;
        padding: 20px;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    .turf-booking .booking-form label {
        font-family: 'Times New Roman', serif;
        display: block;
        margin-bottom: 10px;
    }

    .turf-booking .booking-form input[type="text"],
    .turf-booking .booking-form input[type="date"],
    .turf-booking .booking-form input[type="time"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    /* .turf-booking .booking-form button {
        display: inline-block;
        background-color: #333;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    } */
    .book-button {
    display: inline-block;
    padding: 8px 15px;
    background-color: #1f3144; /* Choose your desired background color */
    color: #e4d6d6; /* Text color */
    text-decoration: none; /* Remove underlines from links */
    border-radius: 10px;
    transition: background-color 0.3s ease; /* Add a hover effect */
}

    .book-button:hover {
        background-color: rgb(206, 75, 5); /* Change background color on hover */
    }

    .header-upper {
        height: 50px; 
    }

    .header-lower {
        height: 90px; /* Change the height to your desired value */
    }
    .search-results {
    font-family: 'Times New Roman', serif;
    display: flex;
    flex-wrap: nowrap; /* Ensure the results stay in one line without wrapping */
    overflow-x: auto; /* Add horizontal scroll if needed */
    }

    .turf-item {
    flex: 0 0 auto; /* Allow each result to have a fixed width */
    margin: 10px; /* Add margin between results */
    }
    .container1 {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    background-color: #fff;
}

.search-section {
    padding: 20px;
    background-color: #f9f9f9;
}

#search-form {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    margin-left: 280px;
}

.input-group {
    flex-grow: 1;
    
}

#search-input {
    width: 50%;
    padding: 20px;
    border: 1px solid #342d2d;
    border-radius: 4px;
    text-align: center;
}

.btn {
    padding: 7px 12px;
    border: none;
    border-radius: 4px;
    background-color: rgb(67, 54, 54); 
    color: #fefcfc;
    cursor: pointer;
}


.btn:hover {
    background-color: #0b4c7e;
}
.turf-container {
    display: flex; /* Make the container flexbox */
    flex-wrap: nowrap; /* Prevent items from wrapping to next line */
    overflow-x: auto; /* Add horizontal scroll if items overflow */
}

.turf-itemm {
    flex: 0 0 auto; /* Prevent items from stretching */
    margin-right: 20px; /* Add margin between items */
}
/* Chat container */
.chat-container {
  overflow-y: auto;
  max-height: 300px; /* Adjust this value as needed */
}

/* Chat message */
.chat-message {
  margin-bottom: 10px;
}

/* Chat message content */
.chat-message-content {
  padding: 10px;
  border-radius: 10px;
  max-width: 70%;
}

/* Bot message */
.bot .chat-message-content {
  background-color: #f0f0f0;
  color: #000;
  float: left;
}

/* User message */
.user .chat-message-content {
  background-color: #007bff;
  color: #fff;
  float: right;
}

/* Clearfix */
.clearfix::after {
  content: "";
  clear: both;
  display: table;
}
/* Button style */
#openFaqModalButton {
    position: fixed;
    bottom: 20px; /* Adjust this value as needed */
    right: 20px; /* Adjust this value as needed */
    z-index: 9999; /* Ensure the button appears above other content */
}

/* Modal style (optional) */
/* Override Bootstrap modal styles */
.modal-dialog {
    position: fixed;
    bottom: 5px;
    right: 0;
    margin: 0;
   
}

/* Optionally, adjust the modal size */
.modal-dialog {
    max-width: 500px; /* Adjust this value as needed */

}

.btnn {
    position: fixed;
    bottom: 20px; /* Adjust as needed */
    right: 20px; /* Adjust as needed */
    z-index: 1000; /* Make sure it's above other content */
    background-color: transparent; /* Set the background color of the button to transparent */
    border: none; /* Remove any border */
}

.btnn img {
    width: 50px; /* Adjust the width of the image as needed */
    height: auto; /* Maintain aspect ratio */
    border: none; /* Remove the border */
}





</style>
</head>
<body>
<div class="wrapper">
    <header class="header-main">
        <div class="header-upper">
            <div class="container">
                <div class="row">
                    <ul>
                        <li><a href="{% url 'logout' %}">LOGOUT</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="header-lower clearfix">
            <div class="container">
                <div class="row">
                    <h1 class="logo"><a href="#"><img src="{% static 'images/logo12.png' %}" width="190"
                                height="190" alt="image"></a></h1>
                    <div class="menubar">
                        <nav class="navbar">
                            <div class="nav-wrapper">
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle"><span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span></button>
                                </div>
                                <div class="nav-menu">
                                    <ul class="nav navbar-nav menu-bar">
                                        <li><a href="#" class="active">Home <span></span> <span></span>
                                                <span></span> <span></span></a></li>
                                        <li><a href="{% url 'booking_history' %}">History <span></span> <span></span> <span></span>
                                                <span></span></a></li>
                                        <li><a href="{% url 'user_profile' %}">profile<span></span> <span></span> <span></span> <span></span></a>
                                        </li>
                                        <li><a href="{% url 'faq' %}">FAQ<span></span> <span></span> <span></span> <span></span></a>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="social"><a href="https://www.facebook.com/hilal.habeeb.1?mibextid=ZbWKwL"
                            class="facebook"><i class="fa fa-facebook"></i></a> <a
                            href="https://twitter.com/itobuztech" class="twitter"><i class="fa fa-twitter"></i></a>
                        <a href="https://www.behance.net/" class="behance"><i class="fa fa-behance"></i></a></div>
                </div>
            </div>
        </div>
    </header>
    <br><br1><br><br><br><br><br>

<!-- Button/link to trigger modal -->
<button type="button" class="btnn btn-primary" data-toggle="modal" data-target="#faqModal">
    <img src="{% static 'images/chat.png' %}" alt="FAQ Icon">
</button>

          
<!-- Modal -->
<div class="modal fade" id="faqModal" tabindex="-1" role="dialog" aria-labelledby="faqModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="faqModalLabel">Frequently Asked Questions</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body chat-container">
          {% for faq in faqs %}
            {% if forloop.none %}
              <div class="chat-message bot">
                <div class="chat-message-content">{{ faq.question }}</div>
              </div>

            {% else %}
              <div class="chat-message user">
                <div class="chat-message-content">{{ faq.question }}</div>
              </div>
            {% endif %}
            <div class="chat-message bot">
              <div class="chat-message-content">{{ faq.answer }}</div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  


        
        <section class="search-section">
            <div class="container">
  
                <form id="search-form">
                    <div class="input-group mb-3">
                        <input type="text" id="search-input" class="form-control" placeholder="Search by turf name or location" />
                        <button type="submit" class="btn btn-primary">Search</button>
                      
                        
                    </div>
                    <a href="#" class="btn btn-primary" onclick="findNearestTurf()">Find Nearest Turf</a>


                </form>
                <div id="search-results" class="search-results">
                    <!-- Display search results here -->
                </div>

                <div id="nearest-turfs" class="turf-container"></div>
            </div>
        </section>

    <!-- Turf Booking section -->
    <section class="turf-booking">
        <div class="container">
            <center><h2>Hi {{ user.first_name }} ,Check out the available Turfs here</h2></center>
            
            <div class="turf-list">
                {% for turf in available_turfs %}
                    <div class="turf-item">
                        {% if turf.images.all %}
                            <!-- Check if the turf has images -->
                            <img src="{{ turf.images.first.image.url }}" alt="{{ turf.turf_name }}">
                            <!-- Display the first image of the turf -->
                        {% else %}
                            <!-- If no images available for the turf, display a default image -->
                            <img src="{% static 'path_to_default_image.jpg' %}" alt="No Image">
                        {% endif %}
                        <h3>{{ turf.turf_name }}</h3>
                        <p>Location: {{ turf.location }}</p>
                        <p>Price: ₹{{ turf.price_per_hour }}/hr</p>
                        <a href="{% url 'turf_detail' turf.id %}" class="book-button">View Turf</a>
                    </div>
                {% empty %}
                    <p>No turfs available for booking.</p>
                {% endfor %}
            </div>

            <!-- Booking Form -->
            <div class="booking-form">
                <h2>Filter a Turf</h2>
                <form action="#" method="post">
                    <label for="turf">Sport Type</label>
                    <select name="turf" id="turf">
                        <option value="turf1">Football</option>
                        <option value="turf2">Cricket</option>
                    </select>
                    <label for="text">Location:</label>
                    <input type="text" id="location" name="location" required>
                    <label for="date">Date:</label>
                    <input type="date" id="date" name="date" required>
                    <label for="time">Time:</label>
                    <input type="time" id="time" name="time" required>
                    <button type="submit">Filter</button>
                </form>
            </div>
        </div>
    </section>
</div>

<script>
    // Function to fetch user's location and redirect to find nearest turf view
    function findNearestTurf() {
        // Check if geolocation is supported by the browser
        if (navigator.geolocation) {
            // Fetch user's current position
            navigator.geolocation.getCurrentPosition(function(position) {
                // Extract latitude and longitude
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;

                // Redirect to find nearest turf view with latitude and longitude parameters
                window.location.href = "{% url 'find_nearest_turf_view' %}?latitude=" + latitude + "&longitude=" + longitude;
            }, function(error) {
                // Handle error if geolocation is denied or fails
                console.error('Error getting user location:', error);
                alert('Could not fetch user location. Please enable location services.');
            });
        } else {
            // Browser doesn't support geolocation
            alert('Geolocation is not supported by this browser.');
        }
    }
</script>

<script>
    function findNearestTurf() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;

                $.get("{% url 'find_nearest_turf_view' %}?latitude=" + latitude + "&longitude=" + longitude, function(response) {
                    if (response && response.turfs) {
                        var resultsHtml = '<div class="turf-container">'; // Start of turf container
                        response.turfs.forEach(function(turf) {
                            resultsHtml += '<div class="turf-itemm">';
                            resultsHtml += '<img src="' + turf.image_url + '" alt="' + turf.venue_name + '" style="max-width: 300px; max-height: 250px;">';
                            resultsHtml += '<h3>' + turf.venue_name + '</h3>';
                            resultsHtml += '<p>Location: ' + turf.location + '</p>';
                            resultsHtml += '<p>Price: ₹' + turf.price_per_hour + '/hr</p>';
                            resultsHtml += '<p>Distance: ' + turf.distance.toFixed(2) + ' km</p>'; // Display distance with two decimal places
                            resultsHtml += '<a href="' + turf.turf_detail_url + '" class="book-button">View Turf</a>';
                            resultsHtml += '</div>';
                        });
                        resultsHtml += '</div>'; // End of turf container
                        $('#nearest-turfs').html(resultsHtml);
                    } else {
                        $('#nearest-turfs').html('<p>No turfs found or error fetching turfs.</p>');
                    }
                });
            }, function(error) {
                console.error('Error getting user location:', error);
                alert('Could not fetch user location. Please enable location services.');
            });
        } else {
            alert('Geolocation is not supported by this browser.');
        }
    }
</script>







<script src="{% static 'js/vendor/vendor.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<script>
    $('#search-form').submit(function (e) {
        e.preventDefault(); // Prevent the default form submission
        searchTurf();
    });

    $('#search-input').on('input', function () {
        searchTurf();
    });

    function searchTurf() {
        var query = $('#search-input').val();
        var searchUrl = '/search/';

        $.ajax({
            url: searchUrl,
            data: { query: query },
            dataType: 'json',
            success: function (data) {
                var resultsHtml = '';

                for (var i = 0; i < data.length; i++) {
                    resultsHtml += '<div class="turf-item">';
                    // Display the single image associated with each TurfListing
                    resultsHtml += '<img src="' + data[i].image_url + '" alt="' + data[i].turf_name + '" style="max-width: 300px; max-height: 250px;">';
                    resultsHtml += '<h3>' + data[i].turf_name + '</h3>';
                    resultsHtml += '<p>Location: ' + data[i].location + '</p>';
                    resultsHtml += '<p>Price: ₹' + data[i].price_per_hour + '/hr</p>';
                    resultsHtml += '<a href="/turf_detail/' + data[i].id + '" class="book-button">View Turf</a>';
                    resultsHtml += '</div>';
                }
                $('#search-results').html(resultsHtml);
            }
        });
    }
</script>

</body>
</html>
